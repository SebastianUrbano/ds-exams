{"ast":null,"code":"import _regeneratorRuntime from \"/home/sebas/distribuidos/ds-exams/app/http/app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/home/sebas/distribuidos/ds-exams/app/http/app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _toConsumableArray from \"/home/sebas/distribuidos/ds-exams/app/http/app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _objectSpread from \"/home/sebas/distribuidos/ds-exams/app/http/app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _classCallCheck from \"/home/sebas/distribuidos/ds-exams/app/http/app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/sebas/distribuidos/ds-exams/app/http/app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/sebas/distribuidos/ds-exams/app/http/app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/sebas/distribuidos/ds-exams/app/http/app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/sebas/distribuidos/ds-exams/app/http/app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/sebas/distribuidos/ds-exams/app/http/app/src/Home/index.js\";\nimport React from 'react';\nimport { withStyles } from '@material-ui/core/styles';\nimport SwipeableViews from 'react-swipeable-views';\nimport Tabs from '@material-ui/core/Tabs';\nimport Tab from '@material-ui/core/Tab';\nimport Grid from '@material-ui/core/Grid';\nimport { withAuth } from '@okta/okta-react';\nimport GithubRepo from \"../GithubRepo\";\nimport SearchBar from \"../SearchBar\";\nimport githubClient from '../githubClient';\nimport APIClient from '../apiClient';\n\nvar styles = function styles(theme) {\n  return {\n    root: {\n      flexGrow: 1,\n      marginTop: 30\n    },\n    paper: {\n      padding: theme.spacing.unit * 2,\n      textAlign: 'center',\n      color: theme.palette.text.secondary\n    }\n  };\n};\n\nvar Home =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(Home, _React$Component);\n\n  function Home() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, Home);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(Home)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      value: 0,\n      repos: [],\n      kudos: []\n    };\n\n    _this.handleTabChange = function (event, value) {\n      _this.setState({\n        value: value\n      });\n    };\n\n    _this.handleTabChangeIndex = function (index) {\n      _this.setState({\n        value: index\n      });\n    };\n\n    _this.resetRepos = function (repos) {\n      return _this.setState(_objectSpread({}, _this.state, {\n        repos: repos\n      }));\n    };\n\n    _this.isKudo = function (repo) {\n      return _this.state.kudos.find(function (r) {\n        return r.id == repo.id;\n      });\n    };\n\n    _this.onKudo = function (repo) {\n      _this.updateBackend(repo);\n    };\n\n    _this.updateBackend = function (repo) {\n      if (_this.isKudo(repo)) {\n        _this.apiClient.deleteKudo(repo);\n      } else {\n        _this.apiClient.createKudo(repo);\n      }\n\n      _this.updateState(repo);\n    };\n\n    _this.updateState = function (repo) {\n      if (_this.isKudo(repo)) {\n        _this.setState(_objectSpread({}, _this.state, {\n          kudos: _this.state.kudos.filter(function (r) {\n            return r.id !== repo.id;\n          })\n        }));\n      } else {\n        _this.setState(_objectSpread({}, _this.state, {\n          kudos: [repo].concat(_toConsumableArray(_this.state.kudos))\n        }));\n      }\n    };\n\n    _this.onSearch = function (event) {\n      var target = event.target;\n\n      if (!target.value || target.length < 3) {\n        return;\n      }\n\n      if (event.which !== 13) {\n        return;\n      }\n\n      githubClient.getJSONRepos(target.value).then(function (response) {\n        target.blur();\n\n        _this.setState(_objectSpread({}, _this.state, {\n          value: 1\n        }));\n\n        _this.resetRepos(response.items);\n      });\n    };\n\n    _this.renderRepos = function (repos) {\n      if (!repos) {\n        return [];\n      }\n\n      return repos.map(function (repo) {\n        return React.createElement(Grid, {\n          item: true,\n          xs: 12,\n          md: 3,\n          key: repo.id,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 98\n          },\n          __self: this\n        }, React.createElement(GithubRepo, {\n          onKudo: _this.onKudo,\n          isKudo: _this.isKudo(repo),\n          repo: repo,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 99\n          },\n          __self: this\n        }));\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(Home, [{\n    key: \"componentDidMount\",\n    value: function () {\n      var _componentDidMount = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee() {\n        var _this2 = this;\n\n        var accessToken;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return this.props.auth.getAccessToken();\n\n              case 2:\n                accessToken = _context.sent;\n                this.apiClient = new APIClient(accessToken);\n                this.apiClient.getKudos().then(function (data) {\n                  return _this2.setState(_objectSpread({}, _this2.state, {\n                    kudos: data\n                  }));\n                });\n\n              case 5:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      return function componentDidMount() {\n        return _componentDidMount.apply(this, arguments);\n      };\n    }()\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(\"div\", {\n        className: styles.root,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 107\n        },\n        __self: this\n      }, React.createElement(SearchBar, {\n        auth: this.props.auth,\n        onSearch: this.onSearch,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 108\n        },\n        __self: this\n      }), React.createElement(Tabs, {\n        value: this.state.value,\n        onChange: this.handleTabChange,\n        indicatorColor: \"primary\",\n        textColor: \"primary\",\n        fullWidth: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 109\n        },\n        __self: this\n      }, React.createElement(Tab, {\n        label: \"Kudos\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 116\n        },\n        __self: this\n      }), React.createElement(Tab, {\n        label: \"Search\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 117\n        },\n        __self: this\n      })), React.createElement(SwipeableViews, {\n        axis: 'x-reverse',\n        index: this.state.value,\n        onChangeIndex: this.handleTabChangeIndex,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 120\n        },\n        __self: this\n      }, React.createElement(Grid, {\n        container: true,\n        spacing: 16,\n        style: {\n          padding: '20px 0'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 125\n        },\n        __self: this\n      }, this.renderRepos(this.state.kudos)), React.createElement(Grid, {\n        container: true,\n        spacing: 16,\n        style: {\n          padding: '20px 0'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 128\n        },\n        __self: this\n      }, this.renderRepos(this.state.repos))));\n    }\n  }]);\n\n  return Home;\n}(React.Component);\n\nexport default withStyles(styles)(withAuth(Home));","map":{"version":3,"sources":["/home/sebas/distribuidos/ds-exams/app/http/app/src/Home/index.js"],"names":["React","withStyles","SwipeableViews","Tabs","Tab","Grid","withAuth","GithubRepo","SearchBar","githubClient","APIClient","styles","theme","root","flexGrow","marginTop","paper","padding","spacing","unit","textAlign","color","palette","text","secondary","Home","state","value","repos","kudos","handleTabChange","event","setState","handleTabChangeIndex","index","resetRepos","isKudo","repo","find","r","id","onKudo","updateBackend","apiClient","deleteKudo","createKudo","updateState","filter","onSearch","target","length","which","getJSONRepos","then","response","blur","items","renderRepos","map","props","auth","getAccessToken","accessToken","getKudos","data","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { withStyles } from '@material-ui/core/styles';\nimport SwipeableViews from 'react-swipeable-views';\nimport Tabs from '@material-ui/core/Tabs';\nimport Tab from '@material-ui/core/Tab';\nimport Grid from '@material-ui/core/Grid';\nimport { withAuth } from '@okta/okta-react';\n\nimport GithubRepo from \"../GithubRepo\"\nimport SearchBar from \"../SearchBar\"\n\nimport githubClient from '../githubClient'\nimport APIClient from '../apiClient'\n\nconst styles = theme => ({\n  root: {\n    flexGrow: 1,\n    marginTop: 30\n  },\n  paper: {\n    padding: theme.spacing.unit * 2,\n    textAlign: 'center',\n    color: theme.palette.text.secondary,\n  },\n});\n\nclass Home extends React.Component {\n  state = {\n    value: 0,\n    repos: [],\n    kudos: []\n  };\n\n  async componentDidMount() {\n    const accessToken = await this.props.auth.getAccessToken()\n    this.apiClient = new APIClient(accessToken);\n    this.apiClient.getKudos().then((data) => \n      this.setState({...this.state, kudos: data})\n    ); \n  }\n\n  handleTabChange = (event, value) => {\n    this.setState({ value });\n  };\n\n  handleTabChangeIndex = index => {\n    this.setState({ value: index });\n  };\n\n  resetRepos = repos => this.setState({ ...this.state, repos })\n\n  isKudo = repo => this.state.kudos.find(r => r.id == repo.id)\n  \n  onKudo = (repo) => {\n    this.updateBackend(repo);\n  }\n\n  updateBackend = (repo) => {\n    if (this.isKudo(repo)) {\n      this.apiClient.deleteKudo(repo);\n    } else {\n      this.apiClient.createKudo(repo);\n    }\n    this.updateState(repo);\n  }\n  updateState = (repo) => {\n    if (this.isKudo(repo)) {\n      this.setState({\n        ...this.state,\n        kudos: this.state.kudos.filter( r => r.id !== repo.id )\n      })\n    } else {\n      this.setState({\n        ...this.state,\n        kudos: [repo, ...this.state.kudos]\n      })\n    }\n  }\n\n  onSearch = (event) => {\n    const target = event.target;\n    if (!target.value || target.length < 3) { return }\n    if (event.which !== 13) { return }\n\n    githubClient\n      .getJSONRepos(target.value)\n      .then((response) => {\n        target.blur();\n        this.setState({ ...this.state, value: 1 });\n        this.resetRepos(response.items);\n      })\n  }\n  \n  renderRepos = (repos) => {\n    if (!repos) { return [] }\n    return repos.map((repo) => {\n      return (\n        <Grid item xs={12} md={3} key={repo.id}>\n          <GithubRepo onKudo={this.onKudo} isKudo={this.isKudo(repo)} repo={repo} />\n        </Grid>\n      );\n    })\n  }\n\n  render() {\n    return (\n      <div className={styles.root}>\n        <SearchBar auth={this.props.auth} onSearch={this.onSearch} />\n         <Tabs\n          value={this.state.value}\n          onChange={this.handleTabChange}\n          indicatorColor=\"primary\"\n          textColor=\"primary\"\n          fullWidth\n        >\n          <Tab label=\"Kudos\" />\n          <Tab label=\"Search\" />\n        </Tabs>\n        \n        <SwipeableViews\n          axis={'x-reverse'}\n          index={this.state.value}\n          onChangeIndex={this.handleTabChangeIndex}\n        >\n          <Grid container spacing={16} style={{padding: '20px 0'}}>\n            { this.renderRepos(this.state.kudos) }\n          </Grid>\n          <Grid container spacing={16} style={{padding: '20px 0'}}>\n            { this.renderRepos(this.state.repos) }\n          </Grid>\n        </SwipeableViews>\n      </div>\n    );\n  }\n}\n\nexport default withStyles(styles)(withAuth(Home));"]},"metadata":{},"sourceType":"module"}